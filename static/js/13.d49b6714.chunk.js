(this["webpackJsonpall-in-one"]=this["webpackJsonpall-in-one"]||[]).push([[13],{1140:function(t,n,e){"use strict";e.r(n);var s={};e.r(s),e.d(s,"updateStatus",(function(){return d})),e.d(s,"updateAuthStatus",(function(){return k}));var o=e(3),c=e.n(o),i=e(7),a=e(8),u=e(35),r=e(1145),h=e(139),f=e(235),d=function(t){return function(n){n({type:f.a.SET_WEBSOCKET_STATUS,payload:{status:t}})}},k=function(t){return function(n){n({type:f.a.SET_AUTH_STATUS,payload:{isAuthenticated:t}})}};e.d(n,"webSocket",(function(){return p}));var p=new(function(){function t(){Object(i.a)(this,t),this.socket=void 0,this.actions=void 0,this.handlers=[],this.socket=Object(r.a)("".concat(window.location.host),{path:"/io",transports:["websocket"],autoConnect:!1}),this.actions=Object(u.b)(s,h.a.dispatch),this.actions.updateStatus(f.b.ENABLED)}return Object(a.a)(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"".concat(window.location.host);this.socket.connected||(this.socket.io.uri=t,this.initListeners(),this.socket.connect())}},{key:"initListeners",value:function(){var t=this;this.socket.on("connect",(function(){return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:t.actions.updateStatus(f.b.CONNECTED);case 1:case"end":return n.stop()}}))})),this.socket.on("disconnect",(function(){t.actions.updateStatus(f.b.DISCONNECTED)})),this.socket.on("connect_error",(function(n){t.actions.updateStatus(f.b.CONNECTION_ERROR)})),this.socket.on("reconnect_error",(function(n){t.actions.updateStatus(f.b.CONNECTION_ERROR)})),this.socket.on("reconnect_failed",(function(n){t.actions.updateStatus(f.b.CONNECTION_ERROR)})),this.socket.on("SOCKET_INIT_STATUS",(function(n){t.actions.updateAuthStatus("success"===n.status)}))}},{key:"setSocketEventListeners",value:function(t){var n=this;t.forEach((function(t){n.handlers.push(t),n.socket.on(t.name,t.instance)}))}},{key:"disconnect",value:function(){this.removeSocketEventListeners(),this.socket.close()}},{key:"removeSocketEventListeners",value:function(){var t=this;this.handlers.forEach((function(n){t.socket.off(n.name,n.instance)}))}}]),t}())}}]);