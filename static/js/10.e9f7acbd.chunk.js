(this["webpackJsonpall-in-one"]=this["webpackJsonpall-in-one"]||[]).push([[10],{1134:function(e,n,t){"use strict";var r=t(3),a=t.n(r),i=t(7),o=t(8),c=t(14),l=t(11),u=t(13),s=t(0),d=t.n(s),f=t(2),p=t(17),m=t(20),b=t(44),v=t(21),h=t(6),g=t(167),x=Object(f.withTheme)((function(e){return d.a.createElement(g.a,{width:e.width,version:"1.1",id:"L9",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 100 100",enableBackground:"new 0 0 0 0",arialabel:"".concat(Object(m.a)("[aria label loader]"))},d.a.createElement("path",{fill:Object(h.a)(e.theme.colors.mainColor),d:"M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50"},d.a.createElement("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",dur:"1s",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})))})),E=t(1),O=t(54),j=t(19),y=t(138),w=t(80),C=t(23);function T(){var e=Object(E.a)(["\n  position: sticky;\n"]);return T=function(){return e},e}function k(){var e=Object(E.a)(["\n      ",".full:valid {\n        background-color: ",";\n        box-shadow: inset 0 2px 0 0 ",";\n        border: solid 1px ",";\n        ",";\n      }\n\n      ",":valid ~ "," {\n        visibility: hidden;\n      }\n\n      "," {\n        visibility: visible;\n      }\n\n      "," {\n        visibility: visible;\n        height: auto;\n      }\n    "]);return k=function(){return e},e}function S(){var e=Object(E.a)(["\n  ",";\n  position: relative;\n  font-weight: normal;\n  ",";\n\n  &.invalid-input "," {\n    background-color: ",";\n    box-shadow: inset 0 2px 0 0 ",";\n    border: solid 1px ",";\n    ",";\n  }\n\n  ",";\n"]);return S=function(){return e},e}function R(){var e=Object(E.a)(["\n  ",";\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  right: 20px;\n  color: ",";\n  ",";\n  cursor: pointer;\n\n  &.icon-eye-close {\n    ",";\n  }\n\n  &:hover {\n    color: ",";\n  }\n\n  &:focus {\n    color: ",";\n    outline: 1px solid black;\n  }\n\n  &:focus:not(:focus-visible) {\n    color: ",";\n    outline: none;\n  }\n"]);return R=function(){return e},e}function I(){var e=Object(E.a)(["\n  && {\n    color: ",";\n    position: relative;\n    ",";\n    visibility: hidden;\n    margin-right: 10px;\n    line-height: 1;\n\n    ",".show & {\n      visibility: visible;\n      color: ",";\n      margin-right: 15px;\n    }\n\n    ",".show & .icon {\n      color: ",";\n      margin-right: 5px;\n    }\n\n    & .icon {\n      color: ",";\n    }\n\n    &.active {\n      visibility: visible;\n    }\n\n    ",".show &.valid, ",".show &.valid .icon {\n      color: ",";\n    }\n\n    ",".show &.invalid, ",".show &.invalid .icon {\n      color: ",";\n    }\n\n    & .icon-exclamation-mark {\n      margin: 0 5px 0 -10px;\n      line-height: 10px;\n    }\n  }\n"]);return I=function(){return e},e}function M(){var e=Object(E.a)(["\n    width: 250px;\n  "]);return M=function(){return e},e}function _(){var e=Object(E.a)(["\n  display: flex;\n  position: relative;\n  left: 25px;\n  top: 5px;\n  visibility: hidden;\n  width: 300px;\n  height:0px;\n\n  &.show {\n    visibility: visible;\n  }\n  &.invalid {\n    height: auto;\n  }\n\n  ",";\n"]);return _=function(){return e},e}function D(){var e=Object(E.a)(["\n  position: absolute;\n  top: 60%;\n  right: 15px;\n  transform: translateY(-50%);\n"]);return D=function(){return e},e}function N(){var e=Object(E.a)(["\n        visibility: visible;\n      "]);return N=function(){return e},e}function A(){var e=Object(E.a)(["\n        visibility: hidden;\n      "]);return A=function(){return e},e}function L(){var e=Object(E.a)(["\n  color: ",";\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  right: 22px;\n  visibility: hidden;\n\n  ",":invalid ~ & {\n    ",";\n  }\n\n  ",":valid ~ & {\n    ",";\n  }\n\n  ",".valid ~ & {\n    visibility: visible;\n  }\n"]);return L=function(){return e},e}function V(){var e=Object(E.a)(["\n  box-sizing: border-box;\n  line-height: 1;\n  position: absolute;\n  padding: 16px 24px;\n  top: -30px;\n  left: 0;\n  ",";\n  color: ",";\n\n  ",".is-empty + & {\n    top: 0;\n    ",";\n  }\n\n  ",";\n\n  ",".changed + &,\n  ",":focus + &,\n  ",":valid + & {\n    top: -30px;\n    ",";\n  }\n\n  ",":-webkit-autofill + & {\n    top: -30px;\n    ",";\n  }"]);return V=function(){return e},e}function B(){var e=Object(E.a)(["\n      & {\n        background-color: ",";\n        box-shadow: inset 0 2px 0 0 ",";\n        border: solid 1px ",";\n        ",";\n      }\n    "]);return B=function(){return e},e}function P(){var e=Object(E.a)(["\n        background-color: ",";\n        box-shadow: inset 0 2px 0 0\n          ",";\n        border: solid 1px ",";\n      "]);return P=function(){return e},e}function z(){var e=Object(E.a)(["\n        background-color: ",";\n        box-shadow: inset 0 2px 0 0\n          ",";\n        border: solid 1px ",";\n        ",";\n      "]);return z=function(){return e},e}function H(){var e=Object(E.a)(["\n    width: 260px;\n    height: 44px;\n  "]);return H=function(){return e},e}function W(){var e=Object(E.a)(["\n  ",";\n  position: relative;\n  top: 0;\n  left: 0;\n  border-radius: 30px;\n  font-weight: normal;\n  ",";\n  width: 320px;\n  height: 50px;\n  border-radius: 30px;\n  box-shadow: inset 0 2px 0 0 ",";\n  background-color: ",";\n  padding: 16px 40px 16px 24px;\n  border: none;\n  color: ",";\n\n  &::placeholder {\n    color: transparent;\n  }\n\n  &:focus {\n    box-shadow: inset 0 2px 0 0 ",";\n    border: solid 1px ",";\n    background-color: ",";\n    outline: none;\n  }\n\n  &:focus::placeholder {\n    color: ",";\n  }\n\n  ",";\n\n  &.full:invalid {\n    ",";\n  }\n\n  &.full:valid {\n    ",";\n  }\n\n  &.full.valid {\n    background-color: ",";\n    box-shadow: inset 0 2px 0 0 ",";\n    border: solid 1px ",";\n  }\n\n  ",";\n"]);return W=function(){return e},e}var F=f.default.input.attrs((function(e){return{type:e.type,name:e.name,placeholder:e.placeholder,tabIndex:e.tabIndex,id:e.id,onInvalid:e.onInvalid,autoComplete:e.autoComplete,pattern:e.pattern,required:"required"}}))(W(),C.n,Object(C.c)(14),(function(e){return Object(h.a)(e.theme.colors.textColor,.08)}),(function(e){return Object(h.a)(e.theme.colors.textColor,.02)}),(function(e){return e.theme.colors.textColor}),(function(e){return Object(h.a)(e.theme.colors.mainColor,.1)}),(function(e){return e.theme.colors.mainColor}),(function(e){return e.theme.colors.contentBodyColor}),(function(e){return Object(h.a)(e.theme.colors.textColor,e.theme.themeUtils.getOpacity(!0,.7))}),j.a.mobile(H()),(function(e){return!0===e.isBlur&&Object(f.css)(z(),(function(e){return Object(h.a)(e.theme.colors.textColor,.02)}),(function(e){return Object(h.a)(e.theme.colors.incorrectColor,.06)}),(function(e){return e.theme.colors.incorrectColor}),O.a)}),(function(e){return!0===e.isBlur&&Object(f.css)(P(),(function(e){return e.theme.colors.contentBodyColor}),(function(e){return Object(h.a)(e.theme.colors.incorrectColor,.1)}),(function(e){return e.theme.colors.correctColor}))}),(function(e){return e.theme.colors.contentBodyColor}),(function(e){return Object(h.a)(e.theme.colors.incorrectColor,.1)}),(function(e){return e.theme.colors.correctColor}),(function(e){return!1===e.validationStatusBeforeSubmit&&Object(f.css)(B(),Object(h.a)(e.theme.colors.textColor,.02),Object(h.a)(e.theme.colors.incorrectColor,.06),e.theme.colors.incorrectColor,O.a)})),U=f.default.label(V(),Object(C.c)(10),(function(e){return Object(h.a)(e.theme.colors.textColor,e.theme.themeUtils.getOpacity(!0,.7))}),F,Object(C.c)(14),Object(O.f)("top"),F,F,F,Object(C.c)(10),F,Object(C.c)(10)),Y=Object(f.default)(b.a)(L(),(function(e){return e.theme.colors.correctColor}),F,(function(e){return!0===e.isBlur&&Object(f.css)(A())}),F,(function(e){return!0===e.isBlur&&Object(f.css)(N())}),F),K=f.default.div.attrs((function(){return{"data-test":"loader-block"}}))(D()),G=f.default.div(_(),j.a.mobile(M())),q=Object(f.default)(y.a)(I(),(function(e){return e.theme.colors.incorrectColor}),Object(C.c)(10),G,(function(e){return Object(h.a)(e.theme.colors.textColor,e.theme.themeUtils.getOpacity(!0,.5))}),G,(function(e){return Object(h.a)(e.theme.colors.textColor,e.theme.themeUtils.getOpacity(!0,.5))}),(function(e){return e.theme.colors.incorrectColor}),G,G,(function(e){return e.theme.colors.correctColor}),G,G,(function(e){return e.theme.colors.incorrectColor})),X=Object(f.default)(b.a).attrs((function(e){return{role:e.role,tabIndex:e.tabIndex,"aria-label":e.ariaLabel}}))(R(),w.a,(function(e){return Object(h.a)(e.theme.colors.textColor,e.theme.themeUtils.getOpacity(!0,.7))}),Object(C.c)(11),Object(C.c)(13),(function(e){return e.theme.colors.textColor}),(function(e){return e.theme.colors.textColor}),(function(e){return e.theme.colors.textColor})),J=f.default.div(S(),C.n,Object(C.c)(14),F,(function(e){return Object(h.a)(e.theme.colors.textColor,.02)}),(function(e){return Object(h.a)(e.theme.colors.incorrectColor,.06)}),(function(e){return e.theme.colors.incorrectColor}),O.a,(function(e){return!0===e.isUserExist&&Object(f.css)(k(),F,Object(h.a)(e.theme.colors.textColor,.02),Object(h.a)(e.theme.colors.incorrectColor,.06),e.theme.colors.incorrectColor,O.a,F,Y,q,G)})),Q=f.default.div(T()),$=function(e){function n(e){var t;return Object(i.a)(this,n),(t=Object(c.a)(this,Object(l.a)(n).call(this,e))).validationPassword=function(e,n){var r=/\s/.test(e.target.value),a=!1;t.props.pattern&&(a=new RegExp(t.props.pattern).test(e.target.value)),0!==e.target.value&&t.setState({startInputPass:0!==e.target.value,isSpaceInPass:r,isPatternPass:a}),!r&&a&&n&&n(e)},t.showErrorText=function(){t.setState({showErrorText:!t.state.validValue||!t.state.hasValue})},t.state={hasValue:!1,validValue:!0,showErrorText:!1,showPassword:!1,showPassValidationBlock:!1,isSpaceInPass:!1,isPatternPass:!1,startInputPass:!1,isLoaded:!1,isBlur:!1},t}return Object(u.a)(n,e),Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.defaultValue&&this.setState({hasValue:!0})}},{key:"onBlurValidationInput",value:function(e,n,t){return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.target.classList.remove("changed"),this.setState({validValue:!e.target.validity.typeMismatch&&!e.target.validity.patternMismatch,showPassValidationBlock:0!==e.target.value.length,isBlur:t!==p.e.EMAIL}),!n){r.next=7;break}return this.setState({isLoaded:!0}),r.next=6,a.a.awrap(n(e));case 6:this.setState({isLoaded:!1});case 7:case"end":return r.stop()}}),null,this)}},{key:"onInputFocus",value:function(e){this.setState({isBlur:!1})}},{key:"showHidePassword",value:function(){this.setState({showPassword:!this.state.showPassword})}},{key:"setTypePassword",value:function(){return this.state.showPassword?p.e.TEXT:p.e.PASSWORD}},{key:"showPassValidationBlock",value:function(){this.setState({showPassValidationBlock:!0})}},{key:"render",value:function(){var e=this,n=this.props,t=n.idInput,r=n.disabled,a=void 0!==r&&r,i=n.type,o=n.name,c=n.tabIndex,l=void 0===c?0:c,u=n.placeholder,d=n.labelText,f=n.onChange,h=n.loadIcon,g=n.validIcon,E=n.textError,O=n.refInput,j=n.defaultValue,y=n.autoComplete,w=n.pattern,C=n.validationStatusBeforeSubmit,T=n.showValidationMessage,k=n.isUserExist,S=n.value,R=n.onBlur,I=n.onFocus,M=this.state,_=M.isBlur,D=M.isLoaded;return s.createElement(J,{theme:this.props.theme,isUserExist:k||!1},s.createElement(Q,null,s.createElement(F,{disabled:a,id:t,ref:O,type:i===p.e.PASSWORD?this.setTypePassword():i,name:o,placeholder:u,className:this.state.hasValue?"full":"is-empty",tabIndex:l,defaultValue:j,autoComplete:y||"",pattern:w,value:S,onBlur:function(e){function n(n){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(n){e.setState({hasValue:!!n.target.value}),e.onBlurValidationInput(n,R,i)})),onFocus:function(e){function n(n){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(n){i===p.e.PASSWORD&&e.showPassValidationBlock(),I&&I(n),e.onInputFocus(n)})),onChange:i===p.e.PASSWORD?function(n){return e.validationPassword(n,f)}:f,onInvalid:this.showErrorText,validationStatusBeforeSubmit:C,theme:this.props.theme,isBlur:_}),s.createElement(U,{theme:this.props.theme,htmlFor:t},d),g&&s.createElement(Y,{theme:this.props.theme,name:"check-mark-2",size:12,isBlur:_}),h&&D&&s.createElement(K,{"data-test":"loader"},s.createElement(x,{width:30,theme:this.props.theme})),i===p.e.PASSWORD&&s.createElement(X,{role:"button",tabIndex:0,ariaLabel:this.state.showPassword?Object(m.a)("[label eye icon hide]"):Object(m.a)("[label eye icon show]"),name:this.state.showPassword?"eye-close":"eye-open",onClick:function(){e.showHidePassword()},onKeyDown:function(n){[v.q.ENTER.toLowerCase(),v.q.SPACEBAR.toLowerCase()].includes(n.key.toLowerCase())&&(n.preventDefault(),e.showHidePassword())},theme:this.props.theme})),E&&T&&s.createElement(G,{className:this.state.validValue?"":"invalid"},s.createElement(q,{theme:this.props.theme,className:this.state.validValue?"":"active","data-test":"email-validation-status"},s.createElement(b.a,{name:"exclamation-mark",theme:this.props.theme}),E)),i===p.e.PASSWORD&&T&&s.createElement(G,{className:this.state.showPassValidationBlock?"show":"hide"},s.createElement(q,{theme:this.props.theme,className:this.state.startInputPass&&(this.state.isSpaceInPass?"invalid":"valid"),"data-test":"password-space-validator"},s.createElement(b.a,{name:"check-mark-2"}),Object(m.a)("[validation pass space]")),s.createElement(q,{className:this.state.startInputPass&&(this.state.isPatternPass?"valid":"invalid"),theme:this.props.theme,"data-test":"password-char-count-validator"},s.createElement(b.a,{name:"check-mark-2"}),Object(m.a)("[validation pass count char]"))))}}]),n}(s.Component);$.defaultProps={validIcon:!1,showValidationMessage:!0,tabIndex:0};var Z=Object(f.withTheme)($);t.d(n,"a",(function(){return Z}))},1143:function(e,n,t){"use strict";t.r(n),t.d(n,"commentsList",(function(){return c})),t.d(n,"commentAdded",(function(){return l})),t.d(n,"commentResolved",(function(){return u})),t.d(n,"commentUnResolved",(function(){return s})),t.d(n,"commentDeleted",(function(){return d})),t.d(n,"commentRestored",(function(){return f})),t.d(n,"replyAdded",(function(){return p})),t.d(n,"replyDeleted",(function(){return m})),t.d(n,"replyRestored",(function(){return b})),t.d(n,"commentResolvedAck",(function(){return v})),t.d(n,"commentDeletedAck",(function(){return h})),t.d(n,"replyDeletedAck",(function(){return g}));var r=t(202),a=t(139),i=t(27),o=t(98),c=function(e){return function(n){n({type:o.a.COMMENTS_LIST,payload:{comments:e}})}},l=function(e){return function(n){Object(r.b)(e,Object(i.e)(a.a.getState()))&&n({type:o.a.COMMENT_ADDED,payload:{comment:e}})}},u=function(e){return function(n){n({type:o.a.COMMENT_RESOLVED,payload:e})}},s=function(e){return function(n){n({type:o.a.COMMENT_UNRESOLVED,payload:e})}},d=function(e){return function(n){n({type:o.a.COMMENT_DELETED,payload:e})}},f=function(e){return function(n){n({type:o.a.COMMENT_RESTORED,payload:e})}},p=function(e){return function(n){n({type:o.a.COMMENT_REPLY_ADDED,payload:e})}},m=function(e){return function(n){n({type:o.a.COMMENT_REPLY_DELETED,payload:e})}},b=function(e){return function(n){n({type:o.a.COMMENT_REPLY_RESTORED,payload:e})}},v=function(e){return function(n){n({type:o.a.COMMENT_RESOLVED_ACK,payload:e})}},h=function(e){return function(n){n({type:o.a.COMMENT_DELETED_ACK,payload:e})}},g=function(e){return function(n){n({type:o.a.COMMENT_REPLY_DELETED_ACK,payload:e})}}},1208:function(e,n,t){"use strict";t.r(n);var r={};t.r(r),t.d(r,"init",(function(){return O})),t.d(r,"trackEvent",(function(){return j}));var a=t(7),i=t(8),o=t(14),c=t(11),l=t(13),u=t(0),s=t.n(u),d=t(26),f=t(20),p=t(427),m=t(3),b=t.n(m),v=t(12),h=t(5),g=t(156),x=t(4),E=t(407),O=function(){return function(e,n){var t;return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(x.a)(n()),e.next=3,b.a.awrap(E.a.init(t));case 3:case"end":return e.stop()}}))}},j=function(e,n){return function(t,r){var a;return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(x.a)(r()),t.next=3,b.a.awrap(E.a.init(a));case 3:E.a.trackEvent(e,n);case 4:case"end":return t.stop()}}))}},y=t(210),w=t(152),C=t(1143),T=t(10),k=t(17),S=t(21),R=t(1),I=t(2),M=t(270),_=t(1134),D=t(23);function N(){var e=Object(R.a)(["\n          & {\n            border: none;\n            border-bottom: 1px solid #f85d67;\n\n            & + label {\n              font-size: 15px;\n              padding: 0;\n            }\n\n            &.full {\n              &:invalid {\n                border: none;\n                border-bottom: 1px solid #f85d67;\n                box-shadow: none;\n                background: #fff;\n              }\n              border: none;\n              border-bottom: 1px solid #f85d67;\n            }\n\n            &:hover,\n            &:focus {\n              border-bottom: 1px solid #f85d67;\n\n              & + label {\n                top: -15px;\n                padding: 0;\n                font-size: 11px;\n              }\n            }\n          }\n        "]);return N=function(){return e},e}function A(){var e=Object(R.a)(["\n          visibility: visible;\n          top: 40px;\n          > span {\n            top: -6px;\n            visibility: visible;\n          }\n        "]);return A=function(){return e},e}function L(){var e=Object(R.a)(["\n  > div {\n    > div {\n      left: 0;\n      > span {\n        top: 8px;\n        font-size: 11px;\n      }\n      ","\n    }\n\n    input {\n      width: 100%;\n      height: 30px;\n      background: #fff;\n      ",";\n      font-size: 13px;\n      font-weight: 600;\n      border: none;\n      border-radius: 0;\n      border-bottom: 1px solid #eaedf1;\n      box-shadow: none;\n      padding: 0 0 7px 0;\n\n      &:disabled {\n        opacity: 0.5;\n\n        &:hover {\n          border-bottom: 1px solid #eaedf1;\n        }\n      }\n\n      &:disabled + label {\n        top: -20px !important;\n      }\n\n      &:valid + label {\n        top: -15px !important;\n      }\n\n      &.is-empty {\n        & + label {\n          top: -15px;\n          ",";\n          padding: 0;\n        }\n\n        &:focus {\n          & + label {\n            top: -15px;\n            padding: 0;\n            font-size: 11px;\n          }\n        }\n      }\n\n      &.full,\n      &.full:-webkit-autofill {\n        &:valid {\n          background-color: #fff;\n          box-shadow: none;\n          border: none;\n          border-bottom: 1px solid #eaedf1;\n          & + label {\n            top: -15px;\n            padding: 0;\n            font-size: 11px;\n          }\n        }\n        &:invalid {\n          background-color: #fff;\n          box-shadow: none;\n          border: none;\n          border-bottom: 1px solid #f85d67;\n          & + label {\n            top: -15px;\n            padding: 0;\n            font-size: 11px;\n          }\n        }\n        &:hover {\n          border-bottom: 1px solid #469dd5;\n        }\n        &:focus {\n          border-bottom: 2px solid #469dd5;\n          & + label {\n            top: -15px;\n            padding: 0;\n            font-size: 11px;\n          }\n        }\n        & + label {\n          top: -15px;\n          padding: 0;\n          font-size: 11px;\n        }\n      }\n\n      &:hover {\n        border-bottom: 1px solid #469dd5;\n      }\n\n      &:focus {\n        border: none;\n        border-bottom: 2px solid #469dd5;\n        box-shadow: none;\n        & + label {\n          top: -15px;\n          padding: 0;\n          font-size: 11px;\n        }\n      }\n\n      ",";\n    }\n  }\n"]);return L=function(){return e},e}function V(){var e=Object(R.a)(["\n  input {\n    & + label {\n      font-size: 15px;\n    }\n  }\n"]);return V=function(){return e},e}function B(){var e=Object(R.a)(["\n  font-size: 11px;\n  line-height: 150%;\n  text-align: left;\n"]);return B=function(){return e},e}function P(){var e=Object(R.a)(["\n  width: 100%;\n  "," {\n    padding-bottom: 16px;\n    margin-bottom: 0;\n    font-size: 20px;\n    line-height: 20px;\n    text-align: left;\n  }\n  > div:not(:first-child) {\n    padding: 0 0 56px;\n    &:last-child {\n      padding: 0 0 8px;\n      margin-top: -9px;\n    }\n  }\n"]);return P=function(){return e},e}function z(){var e=Object(R.a)(["\n  ",";\n  font-weight: 300;\n  font-size: 13px;\n  margin-bottom: 24px;\n  line-height: normal;\n"]);return z=function(){return e},e}var H=I.default.h3(z(),M.b),W=I.default.div(P(),H),F=I.default.div(B()),U=Object(I.default)(_.a)(V()),Y=I.default.div(L(),(function(e){return!1===e.validationStatusBeforeSubmit&&Object(I.css)(A())}),M.b,Object(D.c)(15),(function(e){return!1===e.validationStatusBeforeSubmit&&Object(I.css)(N())})),K=function(e){var n=e.isNameValid,t=e.isEmailValid,r=e.showName,a=e.email,i=e.name,o=e.isNameDisabled,c=e.onChange,l=e.onBlur,s=e.getRefs;return u.createElement(W,null,u.createElement(H,null,Object(f.a)("[please identify yourself]")),u.createElement(F,null,Object(f.a)("[review you will receive the login link]")),u.createElement(Y,{validationStatusBeforeSubmit:t},u.createElement(U,{idInput:"email",type:k.e.EMAIL,refInput:function(e){return s(e)},name:"email",labelText:"Email",placeholder:"john@example.com",autoComplete:"new-email",onChange:c,onBlur:l,validIcon:!1,textError:Object(f.a)("[error email input]"),validationStatusBeforeSubmit:t,theme:e.theme,pattern:S.k.source,value:a})),r?u.createElement(Y,{validationStatusBeforeSubmit:n},u.createElement(U,{idInput:"name",disabled:o,type:k.e.TEXT,refInput:function(e){return s(e)},name:"name",labelText:"Full name",placeholder:"John Doe",onChange:c,onBlur:l,validIcon:!1,pattern:"^(?!\\s*$).+",textError:Object(f.a)("[error name input]"),validationStatusBeforeSubmit:n,theme:e.theme,value:i})):null)},G=t(52),q=t(114),X=t.n(q),J=t(29),Q=Object(J.createSelector)([function(e){return e.user.email},function(e){return e.comments},function(e,n){return n}],(function(e,n,t){return(t?n.filter((function(e){var n,r,a=e.context,i=t.property;return a&&[g.p.QUESTION,g.p.INFORMATION_CONTENT].includes(a.type)&&!a.property&&(i=void 0),a&&a.id===t.id&&a.type===t.type&&a.property===i&&(null===(n=a.ref)||void 0===n?void 0:n.id)===(null===(r=t.ref)||void 0===r?void 0:r.id)})):n.filter((function(e){return!e.context}))).filter((function(n){var t,r,a;return(n.createdBy.isReviewer||n.createdBy.isAnonymous)&&!(n.isDeleted&&(!n.deletedBy||(null===(t=n.deletedBy)||void 0===t?void 0:t.isReviewer)||(null===(r=n.deletedSeenEmails)||void 0===r?void 0:r.includes(e)))||n.isResolved&&(!n.resolvedBy||(null===(a=n.resolvedSeenEmails)||void 0===a?void 0:a.includes(e))))})).map((function(n){var t=X()(n);return t.replies=t.replies.filter((function(n){var t,r;return!(n.isDeleted&&(!n.deletedBy||(null===(t=n.deletedBy)||void 0===t?void 0:t.isReviewer)||(null===(r=n.deletedSeenEmails)||void 0===r?void 0:r.includes(e))))})),t}))})),$=t(36),Z=t(54),ee=t(6);function ne(){var e=Object(R.a)([""]);return ne=function(){return e},e}function te(){var e=Object(R.a)(["\n  margin: 8px 40px;\n"]);return te=function(){return e},e}function re(){var e=Object(R.a)(["\n  cursor: pointer;\n"]);return re=function(){return e},e}function ae(){var e=Object(R.a)(["\n  color: #46a14a;\n"]);return ae=function(){return e},e}function ie(){var e=Object(R.a)(["\n  padding: 4px;\n  border-radius: 100%;\n  display: inline-flex;\n  cursor: pointer;\n  font-size: 3px;\n\n  &:hover {\n    color: white;\n    background-color: #b0bdc8;\n    transition: background-color 0.5s;\n  }\n"]);return ie=function(){return e},e}function oe(){var e=Object(R.a)(["\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-start;\n  height: 60px;\n\n  &:hover {\n    "," {\n      opacity: 1;\n    }\n  }\n"]);return oe=function(){return e},e}function ce(){var e=Object(R.a)(["\n  width: max-content;\n  padding: 4px;\n  opacity: 0;\n\n  transition: opacity 0.5s;\n"]);return ce=function(){return e},e}function le(){var e=Object(R.a)(["\n  font-weight: normal;\n\n  div:first-child {\n    background: transparent;\n    color: #4caf50;\n    text-decoration: underline;\n    box-shadow: none;\n\n    &:hover {\n      background: #e1f2e1;\n    }\n  }\n"]);return le=function(){return e},e}function ue(){var e=Object(R.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 24px;\n\n  div {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 20px;\n    height: 26px;\n    padding: 0 16px;\n    cursor: pointer;\n    box-shadow: 0 2px 8px rgb(0 0 0 / 20%);\n  }\n\n  div:first-child {\n    color: white;\n    background-color: #f85d67;\n  }\n"]);return ue=function(){return e},e}function se(){var e=Object(R.a)(["\n  margin: 0;\n  width: 100%;\n  gap: 12px;\n  justify-content: flex-end;\n  padding-right: 20px;\n  font-weight: 600;\n"]);return se=function(){return e},e}function de(){var e=Object(R.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 17px;\n"]);return de=function(){return e},e}function fe(){var e=Object(R.a)(["\n  flex-direction: row;\n  font-style: italic;\n"]);return fe=function(){return e},e}function pe(){var e=Object(R.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 20px 0;\n"]);return pe=function(){return e},e}function me(){var e=Object(R.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  gap: 8px;\n"]);return me=function(){return e},e}function be(){var e=Object(R.a)(["\n  cursor: text;\n"]);return be=function(){return e},e}function ve(){var e=Object(R.a)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  cursor: pointer;\n\n  &&:hover .icon-garbage {\n    visibility: visible;\n    cursor: pointer;\n  }\n\n  .icon-garbage {\n    color: #aaa;\n    visibility: hidden;\n    cursor: pointer;\n    :hover {\n      color: #f85d67;\n    }\n  }\n"]);return ve=function(){return e},e}function he(){var e=Object(R.a)(["\n  text-align: left;\n  font-size: 12px;\n  line-height: 150%;\n  color: #42515f;\n"]);return he=function(){return e},e}function ge(){var e=Object(R.a)(["\n  font-size: 11px;\n  line-height: 100%;\n  color: #99a9b8;\n"]);return ge=function(){return e},e}function xe(){var e=Object(R.a)(["\n  height: 24px;\n  width: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  cursor: pointer;\n"]);return xe=function(){return e},e}function Ee(){var e=Object(R.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  /*! @noflip */\n  margin-right: 10px;\n\n  height: 100%;\n  width: 100%;\n\n  font-size: 12px;\n  line-height: 16px;\n  font-weight: 600;\n  font-style: italic;\n  text-align: center;\n"]);return Ee=function(){return e},e}function Oe(){var e=Object(R.a)(["\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-between;\n\n  height: 80px;\n  width: 100%;\n  margin-top: 12px;\n  margin-bottom: 12px;\n  border-radius: 2px;\n  border: 1px solid rgba(153, 169, 184, 0.2);\n\n  .icon-close {\n    display: block;\n    position: sticky;\n    right: 12px;\n    margin-top: 12px;\n    cursor: pointer;\n  }\n"]);return Oe=function(){return e},e}function je(){var e=Object(R.a)(["\n  text-align: left;\n  font-weight: 600;\n  font-size: 12px;\n  max-width: 200px;\n  line-height: 100%;\n  color: #42515f;\n"]);return je=function(){return e},e}function ye(){var e=Object(R.a)(["\n  height: 4px;\n  width: 4px;\n  border-radius: 100%;\n  background: #dfe4e8;\n"]);return ye=function(){return e},e}function we(){var e=Object(R.a)(["\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  gap: 8px;\n\n  .icon {\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n  }\n"]);return we=function(){return e},e}function Ce(){var e=Object(R.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 8px;\n\n  width: calc(100% - 32px);\n  padding-left: 17px;\n"]);return Ce=function(){return e},e}function Te(){var e=Object(R.a)(["\n  display: flex;\n  gap: 8px;\n"]);return Te=function(){return e},e}function ke(){var e=Object(R.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n\n  .icon-garbage {\n    cursor: pointer;\n    color: #aaa;\n    visibility: hidden;\n    :hover {\n      color: #f85d67;\n    }\n  }\n"]);return ke=function(){return e},e}function Se(){var e=Object(R.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: center;\n  gap: 8px;\n\n  width: 100%;\n"]);return Se=function(){return e},e}function Re(){var e=Object(R.a)(["\n          :before {\n            content: '';\n            display: block;\n            position: sticky;\n            margin: 0 24px -32px -24px;\n            height: 32px;\n            width: 2px;\n            background-color: #81c884;\n          }\n        "]);return Re=function(){return e},e}function Ie(){var e=Object(R.a)(["\n  display: flex;\n  align-items: stretch;\n  flex-wrap: wrap;\n  width: 100%;\n  padding: 12px 0;\n\n  ","\n"]);return Ie=function(){return e},e}function Me(){var e=Object(R.a)(["\n  height: inherit;\n  width: 32px;\n  padding-top: 15px;\n  box-sizing: border-box;\n\n  :before {\n    content: '';\n    display: ",";\n    height: 100%;\n    min-height: 20px;\n    width: 1px;\n    opacity: 1;\n\n    left: 30px;\n    margin: 0 auto;\n    border-radius: 2px;\n    border-right: 1px solid rgba(66, 81, 95, 0.1);\n\n    -webkit-transition: opacity 0.2s ease-in-out;\n    transition: opacity 0.2s ease-in-out;\n  }\n"]);return Me=function(){return e},e}function _e(){var e=Object(R.a)(["\n  &&:hover .icon-garbage {\n    visibility: visible;\n    cursor: pointer;\n  }\n"]);return _e=function(){return e},e}function De(){var e=Object(R.a)([""]);return De=function(){return e},e}function Ne(){var e=Object(R.a)(["\n  display: flex;\n  align-items: center;\n  gap: 16px;\n\n  height: 42px;\n  width: calc(100% + 5px);\n  border-radius: 21px;\n\n  padding-left: 5px;\n  ","\n  margin-left: -5px;\n\n  font-weight: 600;\n  font-size: 12px;\n  line-height: 13px;\n  color: #73899e;\n\n  background: #fbfbfb;\n  cursor: pointer;\n"]);return Ne=function(){return e},e}function Ae(){var e=Object(R.a)(["\n      & {\n        background-color: ",";\n        box-shadow: inset 0 2px 0 0 ",";\n        border: solid 1px ",";\n        ",";\n      }\n    "]);return Ae=function(){return e},e}function Le(){var e=Object(R.a)(["\n  ",";\n  display: block;\n  height: 80px;\n  width: calc(100% - 40px);\n  padding: 12px;\n  resize: none;\n  border: 1px solid #469dd5;\n  border-radius: 2px;\n  outline: none;\n  font-size: 12px;\n  line-height: 20px;\n\n  &:hover {\n    border-color: #76b6e0;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: #469dd5;\n    box-shadow: inset 0 1px 3px 0 rgba(70, 157, 213, 0.3);\n  }\n\n  ",";\n"]);return Le=function(){return e},e}function Ve(){var e=Object(R.a)(["\n  font-size: 10px;\n\n  height: 32px;\n  width: 32px;\n  min-width: 32px;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  color: white;\n  background: ",";\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center;\n\n  border-radius: 100%;\n  border: ",";\n"]);return Ve=function(){return e},e}function Be(){var e=Object(R.a)([""]);return Be=function(){return e},e}function Pe(){var e=Object(R.a)(["\n  margin-top: 12px;\n"]);return Pe=function(){return e},e}function ze(){var e=Object(R.a)(["\n  display: flex;\n  gap: 8px;\n"]);return ze=function(){return e},e}function He(){var e=Object(R.a)(["\n  color: #73899e;\n  opacity: 0.7;\n"]);return He=function(){return e},e}function We(){var e=Object(R.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  position: absolute;\n  margin-left: -10px;\n\n  height: 19px;\n  width: 19px;\n  border-radius: 100%;\n\n  background-color: white;\n"]);return We=function(){return e},e}function Fe(){var e=Object(R.a)(["\n  display: block;\n  position: relative;\n  left: -8px;\n  top: 15px;\n"]);return Fe=function(){return e},e}function Ue(){var e=Object(R.a)(["\n  margin-top: 30px;\n"]);return Ue=function(){return e},e}function Ye(){var e=Object(R.a)(["\n  color: #81c884;\n  /*! @noflip */\n  margin-right: 10px;\n"]);return Ye=function(){return e},e}function Ke(){var e=Object(R.a)(["\n  color: #99a9b8;\n  ",";\n  margin: 0px 2px 0px 15px;\n"]);return Ke=function(){return e},e}function Ge(){var e=Object(R.a)(["\n  color: #46a14a;\n  ",";\n"]);return Ge=function(){return e},e}function qe(){var e=Object(R.a)(["\n  display: flex;\n  align-items: center;\n"]);return qe=function(){return e},e}function Xe(){var e=Object(R.a)(["\n  color: #b0bdc8;\n  width: 10px;\n  cursor: pointer;\n"]);return Xe=function(){return e},e}function Je(){var e=Object(R.a)(["\n  margin-top: 5px;\n"]);return Je=function(){return e},e}function Qe(){var e=Object(R.a)(["\n  cursor: pointer;\n  margin-left: 5px;\n"]);return Qe=function(){return e},e}function $e(){var e=Object(R.a)(["\n  color: #469dd5;\n\n  ::before {\n    vertical-align: baseline;\n  }\n"]);return $e=function(){return e},e}function Ze(){var e=Object(R.a)(["\n  font-size: 13px;\n  line-height: 150%;\n  font-weight: normal;\n  text-align: left;\n  margin-bottom: -24px;\n"]);return Ze=function(){return e},e}function en(){var e=Object(R.a)(["\n  ",";\n  font-weight: 600;\n  font-size: 13px;\n  margin-bottom: 24px;\n  text-align: left;\n"]);return en=function(){return e},e}function nn(){var e=Object(R.a)(["\n  width: 100%;\n"]);return nn=function(){return e},e}var tn=I.default.div(nn()),rn=I.default.h3(en(),M.b),an=I.default.p.attrs((function(){return{"data-test":"login-link-sent"}}))(Ze()),on=Object(I.default)(d.h)($e()),cn=Object(I.default)(on).attrs((function(){return{"data-test":"help-icon"}}))(Qe()),ln=Object(I.default)(on)(Je()),un=Object(I.default)(d.h)(Xe()),sn=Object(I.default)(d.h)(qe()),dn=Object(I.default)(d.h)(Ge(),(function(e){var n;return!(null===(n=e.theme)||void 0===n?void 0:n.isRtl)&&"top: 1px"})),fn=Object(I.default)(d.h)(Ke(),(function(e){var n;return!(null===(n=e.theme)||void 0===n?void 0:n.isRtl)&&"top: 3px"})),pn=Object(I.default)(d.h)(Ye()),mn=I.default.div(Ue()),bn=I.default.div(Fe()),vn=I.default.div(We()),hn=Object(I.default)(d.h)(He()),gn=I.default.div(ze()),xn=Object(I.default)(gn)(Pe()),En=I.default.div(Be()),On=I.default.div.attrs((function(e){var n=e.children;return{children:e.avatarUrl?null:n}}))(Ve(),(function(e){return e.avatarUrl?"url(".concat(e.avatarUrl,")"):"#96c7e7"}),(function(e){return e.avatarUrl?"unset":"1px solid #76b6e0"})),jn=I.default.textarea.attrs((function(e){return{"aria-label":e.ariaLabel,"data-test":"comment-text-area"}}))(Le(),M.b,(function(e){return!e.validComment&&Object(I.css)(Ae(),Object(ee.a)(e.theme.colors.textColor,.02),Object(ee.a)(e.theme.colors.incorrectColor,.06),e.theme.colors.incorrectColor,Z.a)})),yn=I.default.div(Ne(),(function(e){return e.spacing&&"margin: ".concat(e.spacing,"px 0;")})),wn=I.default.div(De()),Cn=I.default.div(_e()),Tn=I.default.div(Me(),(function(e){return e.visible?"block":"none"})),kn=I.default.div.attrs((function(){return{"data-test":"comment-item"}}))(Ie(),(function(e){return e.isActiveComment?Object(I.css)(Re()):""})),Sn=I.default.div(Se()),Rn=I.default.div(ke()),In=I.default.div(Te()),Mn=I.default.div(Ce()),_n=I.default.div(we()),Dn=I.default.div(ye()),Nn=I.default.div(je()),An=I.default.div(Oe()),Ln=I.default.div(Ee()),Vn=I.default.div(xe()),Bn=I.default.div(ge()),Pn=I.default.div(he()),zn=I.default.div(ve()),Hn=Object(I.default)(zn)(be()),Wn=I.default.div(me()),Fn=I.default.div(pe()),Un=Object(I.default)(Fn)(fe()),Yn=I.default.div(de()),Kn=Object(I.default)(Yn)(se()),Gn=I.default.div(ue()),qn=Object(I.default)(Gn)(le()),Xn=I.default.div(ce()),Jn=I.default.div(oe(),Xn),Qn=I.default.div(ie()),$n=I.default.div.attrs({"data-test":"review-form-submit-button"})(ae()),Zn=Object(I.default)($n).attrs({"data-test":"review-form-reply-button"})(re()),et=I.default.div(te()),nt=Object(I.default)(et)(ne()),tt=t(72),rt=function(e){var n=new Date,t=n.getFullYear()-e.getFullYear(),r=n.getMonth()-e.getMonth(),a=n.getDate()-e.getDate(),i=n.getHours()-e.getHours(),o=n.getMinutes()-e.getMinutes(),c=n.getSeconds()-e.getSeconds();return t>=1?Object(f.a)("[x years ago]",{x:Math.floor(t)}):r>=1?Object(f.a)("[x months ago]",{x:Math.floor(r)}):a>=1?Object(f.a)("[x days ago]",{x:Math.floor(a)}):i>=1?Object(f.a)("[x hours ago]",{x:Math.floor(i)}):o>=1?Object(f.a)("[x minutes ago]",{x:Math.floor(o)}):c>15?Object(f.a)("[less than a minute ago]"):Object(f.a)("[a few seconds ago]")},at=t(533),it=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?"caret-up":"caret-down"};var ot=Object(I.withTheme)(Object($.b)((function(e,n){return{comments:Q(e,n.context)}}))((function(e){var n,t,r=e.layout,a=e.commentText,i=e.replyText,o=e.isValidComment,c=e.onChange,l=e.getRefs,p=e.onSubmit,m=e.getFormActions,x=e.onDelete,E=e.onAcknowledgeDeleted,O=e.onAcknowledgeResolved,j=e.context,y=e.comments,w=void 0===y?[]:y,C=e.name,T=e.avatarUrl,k=Object(u.useState)(""),R=Object(G.a)(k,2),I=R[0],M=R[1],_=Object(u.useState)(!1),D=Object(G.a)(_,2),N=D[0],A=D[1],L=Object(u.useState)(!0),V=Object(G.a)(L,2),B=V[0],P=V[1],z=Object(u.useState)({}),H=Object(G.a)(z,2),W=H[0],F=H[1],U=Object(u.useState)({}),Y=Object(G.a)(U,2),K=Y[0],q=Y[1],X=Object(u.useState)([]),J=Object(G.a)(X,2),Q=J[0],$=J[1],Z=null!==(n=null===(t=at.CommentContextUtil.getContextTitle(j))||void 0===t?void 0:t.toLowerCase())&&void 0!==n?n:Object(f.a)("contentArea"),ee=Object(f.a)("reviewSpotContextDescription",{contextType:Z}),ne=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=e.target,r=e.shiftKey,a=e.ctrlKey,i=e.metaKey,o=e.altKey,c=e.nativeEvent.code;if(c===S.q.ENTER){if(r&&!a&&!i||o)return;var l;if(e.preventDefault(),n)null===(l=document.getElementById(n))||void 0===l||l.click();else t.parentNode.nextElementSibling.firstChild.click()}},te=function(e){var n,t;return(null===(n=e.createdBy)||void 0===n?void 0:n.isReviewer)||(null===(t=e.createdBy)||void 0===t?void 0:t.isAnonymous)?"eye-reviewer":"co-authors"},re=function(e){M(e)},ae=function(e){return function(n){n.nativeEvent.stopImmediatePropagation(),re(e)}},ie=function(e){return e.createdBy.isReviewer||e.createdBy.isAnonymous},oe=function(){return r===g.g.ADD_COMMENT_WITH_HISTORY},ce=function(e){e.nativeEvent.stopImmediatePropagation(),P(!0)},le=function(e){return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!N){n.next=2;break}return n.abrupt("return");case 2:if(n.prev=2,!("comment-text-area"===e.target.id)||a){n.next=7;break}return e.preventDefault(),n.abrupt("return");case 7:return A(!0),n.next=10,b.a.awrap(p(e));case 10:A(!1),[g.g.ADD_COMMENT_WITH_HISTORY,g.g.ADD_COMMENT].includes(r)&&P(!1),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(2),A(!1);case 17:case"end":return n.stop()}}),null,null,[[2,14]])},ue=function(e,n){return e.isResolved?s.a.createElement(An,null,s.a.createElement(Ln,null,s.a.createElement(pn,{name:"check-mark",size:16}),s.a.createElement("span",null,!!n?Object(f.a)("[reply resolved by author]"):Object(f.a)("[comment resolved by author]"))),s.a.createElement(Vn,{onClick:function(){return O(e.id)}},s.a.createElement(d.h,{name:"close",size:6}))):s.a.createElement(An,null,s.a.createElement(Ln,null,s.a.createElement("span",null,function(e){return e?Object(f.a)("[reply deleted by author]"):Object(f.a)("[comment deleted by author]")}(!!n))),s.a.createElement(Vn,{onClick:function(){return E(e.id,null===n||void 0===n?void 0:n.id)}},s.a.createElement(d.h,{name:"close",size:6})))},se=function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement(xn,null,s.a.createElement(On,{avatarUrl:T},Object(tt.c)(C)),s.a.createElement(jn,{tabIndex:1,ref:l,ariaLabel:Object(f.a)("[comment area]"),validComment:o,onChange:c,onKeyDown:function(e){return ne(e,"reply-text-area")},name:"replyText",value:i})),s.a.createElement(nt,null,s.a.createElement(zn,null,s.a.createElement(Wn,null,s.a.createElement("div",null,s.a.createElement(dn,{size:8,name:"arrow-send"})),s.a.createElement(Zn,{id:"reply-text-area",onClick:function(n){return function(e,n){i&&(e.nativeEvent.stopImmediatePropagation(),e.preventDefault(),M(""),p(e,n))}(n,e.id)}},Object(f.a)("[post reply]")),s.a.createElement("div",{onClick:function(){return re("")}},Object(f.a)("[cancel]"))))))},de=function(e){return I===e.id?se(e):(n=e.id,s.a.createElement(yn,{onClick:ae(n),spacing:21},s.a.createElement(On,{avatarUrl:T},Object(tt.c)(C)),s.a.createElement(wn,null,s.a.createElement(fn,{size:8,name:"arrow-send"}),Object(f.a)("[reply]"))));var n},fe=function(e,n){e.nativeEvent.stopImmediatePropagation(),F(Object(h.a)({},W,Object(v.a)({},n,!W[n])))},pe=function(e,n){e.nativeEvent.stopImmediatePropagation(),q(Object(h.a)({},K,Object(v.a)({},n,!K[n])))},me=function(e){return W[e.id]?s.a.createElement(Fn,null,s.a.createElement(Yn,null,Object(f.a)("[delete comment confirmation]")),s.a.createElement(Gn,null,s.a.createElement("div",{onClick:function(){return x(e.id)}},Object(f.a)("[delete]")),s.a.createElement("div",{onClick:function(n){return fe(n,e.id)}},Object(f.a)("[cancel]")))):s.a.createElement(kn,{key:e.id,isActiveComment:Q[e.id]},s.a.createElement(Sn,null,s.a.createElement(Rn,null,s.a.createElement(In,null,s.a.createElement(En,null,s.a.createElement(On,{avatarUrl:e.createdBy.avatarUrl,e:!0},Object(tt.c)(e.createdBy.fullName||"".concat(e.createdBy.firstName," ").concat(e.createdBy.lastName)))),s.a.createElement(bn,null,s.a.createElement(vn,null,s.a.createElement(hn,{name:te(e),size:8}))),s.a.createElement(_n,null,s.a.createElement(Nn,null,e.createdBy&&e.createdBy.fullName||"".concat(e.createdBy.firstName," ").concat(e.createdBy.lastName)),s.a.createElement(Dn,null),s.a.createElement(Bn,null,rt(new Date(e.createdOn))))),!!e.replies.length&&s.a.createElement(Vn,{onClick:function(){return n=e.id,Q[n]=!Q[n],void $(Object(h.a)({},Q));var n}},s.a.createElement(un,{name:it(Q[e.id]),size:4})))),s.a.createElement(Tn,{visible:Q[e.id]&&!!e.replies.length||I===e.id}),s.a.createElement(Mn,null,s.a.createElement(Pn,{dangerouslySetInnerHTML:{__html:e.text}}),oe()&&s.a.createElement(Hn,null,s.a.createElement(Wn,null,s.a.createElement("div",null,s.a.createElement(dn,{size:8,name:"arrow-send"})),s.a.createElement(Zn,{onClick:function(){return re(e.id)}},Object(f.a)("[add reply]")),s.a.createElement(Dn,null),s.a.createElement("div",null,function(e){var n=e.replies.filter((function(e){return!e.isDeleted&&!e.isResolved})).length;if(!n)return Object(f.a)("[no replies yet]").toLowerCase();var t="[".concat(1===n?"one reply":"X replies","]");return Object(f.a)(t,{x:n})}(e))),oe()&&ie(e)&&s.a.createElement("div",{onClick:function(n){return fe(n,e.id)},title:Object(f.a)("[delete comment]")},s.a.createElement(d.h,{name:"garbage",size:12})))))},be=function(e){e.nativeEvent.stopImmediatePropagation(),P(!1)};return s.a.createElement(tn,{id:"comment-form"},[g.g.ADD_COMMENT_WITH_HISTORY,g.g.ADD_COMMENT].includes(r)?s.a.createElement(rn,{"data-test":"comment-form-title"},ee):null,[g.g.ADD_COMMENT_WITH_HISTORY,g.g.ADD_COMMENT].includes(r)&&(B?s.a.createElement(gn,null,s.a.createElement(On,{avatarUrl:T},Object(tt.c)(C)),s.a.createElement(jn,{tabIndex:1,ref:l,ariaLabel:Object(f.a)("[comment area]"),validComment:o,onChange:c,onKeyDown:ne,name:"commentText",value:a})):s.a.createElement(yn,{onClick:ce},s.a.createElement(On,{avatarUrl:T},Object(tt.c)(C)),s.a.createElement(wn,null,"+ ",Object(f.a)("[add new comment]")))),[g.g.ADD_COMMENT,g.g.ADD_COMMENT_WITH_HISTORY].includes(r)?B&&m(le,be):m(le),[g.g.ADD_COMMENT_WITH_HISTORY,g.g.ADD_COMMENT].includes(r)&&!!(null===w||void 0===w?void 0:w.length)&&s.a.createElement(mn,null,null===w||void 0===w?void 0:w.map((function(e,n){return e.isResolved||e.isDeleted?ue(e,null):s.a.createElement(u.Fragment,{key:"comment-list-".concat(e.id)},s.a.createElement(Cn,{key:e.id,isActiveComment:Q[e.id]},me(e)),I===e.id&&!Q[e.id]&&se(e),Q[e.id]&&e.replies&&e.replies.map((function(n,t){return n.isDeleted?ue(e,n):function(e,n,t){return K[n.id]?s.a.createElement(Un,null,s.a.createElement(Kn,null,Object(f.a)("[reply was deleted]"),s.a.createElement(qn,null,s.a.createElement("div",{onClick:function(e){return pe(e,n.id)}},Object(f.a)("[undo]")))),s.a.createElement(Jn,{onClick:function(){return x(e.id,n.id)}},s.a.createElement(Xn,null,Object(f.a)("[delete forever]")),s.a.createElement(Qn,null,s.a.createElement(d.h,{name:"close"})))):s.a.createElement(Cn,{key:n.id},s.a.createElement(kn,null,s.a.createElement(Sn,null,s.a.createElement(Rn,null,s.a.createElement(In,null,s.a.createElement(On,{avatarUrl:n.createdBy.avatarUrl},Object(tt.c)("".concat(n.createdBy.firstName," ").concat(n.createdBy.lastName))),s.a.createElement(bn,null,s.a.createElement(vn,null,s.a.createElement(hn,{name:te(n),size:8}))),s.a.createElement(_n,null,s.a.createElement(Nn,null,n.createdBy&&n.createdBy.fullName||"".concat(n.createdBy.firstName," ").concat(n.createdBy.lastName)),s.a.createElement(Dn,null),s.a.createElement(Bn,null,rt(new Date(n.createdOn))))),oe()&&ie(n)&&s.a.createElement("div",{onClick:function(e){return pe(e,n.id)},title:Object(f.a)("[delete reply]")},s.a.createElement(d.h,{name:"garbage",size:12})))),s.a.createElement(Tn,{visible:e.replies.length>t+1}),s.a.createElement(Mn,null,s.a.createElement(Pn,{dangerouslySetInnerHTML:{__html:n.text}}))))}(e,n,t)})),Q[e.id]&&de(e))}))))}))),ct=t(80),lt=t(211),ut=t(44),st=t(209);function dt(){var e=Object(R.a)(["\n  color: #fff;\n  ",";\n  margin-right: 6px;\n"]);return dt=function(){return e},e}function ft(){var e=Object(R.a)(["\n  width: 100%;\n  height: 5px;\n  background: #4caf50;\n  animation-name: grow;\n  animation-duration: 5s;\n  animation-timing-function: linear;\n\n  @keyframes grow {\n    from {\n      width: 100%;\n    }\n    to {\n      width: 0%;\n    }\n  }\n"]);return ft=function(){return e},e}function pt(){var e=Object(R.a)(["\n  background: rgba(248, 93, 103, 0.1);\n  border: solid 1px rgba(248, 93, 103, 0.3);\n"]);return pt=function(){return e},e}function mt(){var e=Object(R.a)(["\n  ",";\n  line-height: 17px;\n  padding: 7px 13px 7px 27px;\n  position: relative;\n  width: 100%;\n  text-align: left;\n"]);return mt=function(){return e},e}function bt(){var e=Object(R.a)(["\n  width: 100%;\n  margin-top: 16px;\n  background: #f6fbf7;\n  border-radius: 3px;\n  border: solid 1px #d3ecd4;\n  ",";\n"]);return bt=function(){return e},e}function vt(){var e=Object(R.a)(["\n  ",";\n  left: 12px;\n  color: #f85d67;\n  position: absolute;\n  font-size: 16px;\n  font-weight: bold;\n"]);return vt=function(){return e},e}function ht(){var e=Object(R.a)(["\n  ",";\n  left: 8px;\n  color: #4caf50;\n  line-height: 7px;\n  position: absolute;\n"]);return ht=function(){return e},e}function gt(){var e=Object(R.a)(["\n  ",";\n  font-size: 11px;\n  font-weight: 600;\n  color: #99a9b8;\n  cursor: pointer;\n  margin-left: 24px;\n  padding: 0;\n\n  &:hover,\n  &:focus {\n    color: #81c884;\n  }\n"]);return gt=function(){return e},e}function xt(){var e=Object(R.a)(["\n  ",";\n  position: relative;\n  background: #4caf50;\n  border-radius: 16px;\n  color: #fff;\n  font-size: 11px;\n  line-height: 11px;\n  font-weight: 600;\n  cursor: pointer;\n  box-shadow: 0 2px 8px 0 ",";\n  ",";\n  width: 140px;\n  height: 32px;\n\n  &:hover,\n  &:focus {\n    background: #46a14a;\n  }\n\n  &:disabled:before {\n    background-color: rgba(255, 255, 255, 0.3);\n    content: '';\n    cursor: not-allowed;\n    height: 100%;\n    left: 0;\n    position: absolute;\n    top: 0;\n    width: 100%;\n  }\n"]);return xt=function(){return e},e}function Et(){var e=Object(R.a)(["\n  align-self: flex-end;\n\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  margin-top: ",";\n"]);return Et=function(){return e},e}function Ot(){var e=Object(R.a)(["\n  background: ",";\n  padding: "," 24px 40px 24px;\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  width: 100%;\n\n  max-height: 666px;\n  overflow: auto;\n\n  ","\n\n  &::-webkit-scrollbar {\n    width: 4px;\n  }\n"]);return Ot=function(){return e},e}function jt(){var e=Object(R.a)(["\n  width: 100%;\n"]);return jt=function(){return e},e}function yt(){var e=Object(R.a)(["\n  width: 100%;\n  display: flex;\n  gap: 8px;\n  margin-top: 24px;\n  color: #469dd5;\n  line-height: 12px;\n  font-size: 12px;\n  a {\n    font-weight: normal;\n    text-decoration: underline;\n  }\n  cursor: pointer;\n"]);return yt=function(){return e},e}function wt(){var e=Object(R.a)(["\n  font-weight: 600;\n  font-size: 13px;\n  line-height: 150%;\n"]);return wt=function(){return e},e}function Ct(){var e=Object(R.a)(["\n  position: absolute;\n  width: 10px;\n  height: 10px;\n  left: 139px;\n  top: 7.07px;\n\n  background: #ffffff;\n  transform: rotate(-45deg);\n"]);return Ct=function(){return e},e}function Tt(){var e=Object(R.a)(["\n  margin-top: 24px;\n  font-weight: 600;\n  color: #73899e;\n  cursor: pointer;\n"]);return Tt=function(){return e},e}function kt(){var e=Object(R.a)(["\n  font-weight: normal;\n"]);return kt=function(){return e},e}function St(){var e=Object(R.a)(["\n  min-height: 156px;\n  width: 289px;\n  background: white;\n  box-shadow: 0px 4px 20px 4px rgba(38, 50, 61, 0.1), 0px 4px 80px -8px rgba(38, 50, 61, 0.2);\n"]);return St=function(){return e},e}function Rt(){var e=Object(R.a)(["\n      height: 0;\n      width: 0;\n      position: ",";\n      background: transparent;\n      z-index: 10;\n      margin-left: ",";\n      margin-top: 10px;\n      padding-top: 12px;\n    "]);return Rt=function(){return e},e}function It(){var e=Object(R.a)(["\n  ","\n"]);return It=function(){return e},e}function Mt(){var e=Object(R.a)(["\n  display: inline-block;\n  font-weight: 600;\n  font-size: 13px;\n  line-height: 150%;\n  margin: 32px 24px;\n"]);return Mt=function(){return e},e}function _t(){var e=Object(R.a)(["\n  display: inline-flex;\n  height: 1px;\n  width: 1px;\n"]);return _t=function(){return e},e}function Dt(){var e=Object(R.a)(["\n  font-size: 13px;\n  display: inline;\n  span {\n    color: #73899e;\n  }\n"]);return Dt=function(){return e},e}function Nt(){var e=Object(R.a)(["\n  font-size: 13px;\n  line-height: 19.5px;\n"]);return Nt=function(){return e},e}function At(){var e=Object(R.a)(["\n  font-size: 11px;\n  line-height: 150%;\n  display: inline;\n\n  span {\n    color: #848fa3;\n  }\n"]);return At=function(){return e},e}function Lt(){var e=Object(R.a)(["\n  margin-left: 8px;\n  text-align: left;\n"]);return Lt=function(){return e},e}function Vt(){var e=Object(R.a)(["\n  min-height: 48px;\n  display: flex;\n  align-items: left;\n  padding: 7px 46px 7px 16px;\n  background-color: ",";\n  border: 1px solid #469dd5;\n  border-radius: 3px;\n"]);return Vt=function(){return e},e}function Bt(){var e=Object(R.a)(["\n  margin: 0 -24px;\n  background: white;\n"]);return Bt=function(){return e},e}function Pt(){var e=Object(R.a)(["\n  margin: 40px 24px 24px 24px;\n  background: white;\n  max-width: 444px;\n"]);return Pt=function(){return e},e}function zt(){var e=Object(R.a)(["\n  ",";\n  width: ","px;\n  max-height: 666px;\n  margin: -5px -7px -7px;\n"]);return zt=function(){return e},e}function Ht(){var e=Object(R.a)(["\n  width: 100%;\n"]);return Ht=function(){return e},e}I.default.div(Ht());var Wt=I.default.form(zt(),M.b,(function(e){return e.width||444})),Ft=I.default.div(Pt()),Ut=(I.default.div(Bt()),I.default.div.attrs((function(){return{"data-test":"use-login-link-message"}}))(Vt(),Object(ee.a)("#469dd5",.1))),Yt=I.default.div(Lt()),Kt=I.default.div(At()),Gt=Object(I.default)(Kt)(Nt()),qt=I.default.div(Dt()),Xt=I.default.div(_t()),Jt=I.default.div(Mt()),Qt=I.default.div(It(),(function(e){return Object(I.css)(Rt(),e.sticky?"sticky":"fixed",e.sticky?"-150px":"-133px")})),$t=I.default.div(St()),Zt=I.default.div(kt()),er=I.default.div(Tt()),nr=I.default.div(Ct()),tr=I.default.div(wt()),rr=I.default.div(yt()),ar=I.default.div(jt()),ir=I.default.div(Ot(),(function(e){return e.theme.colors.contentBodyColor}),(function(e){return e.verifyPopupShown?"0":"40px"}),Object(st.a)()),or=I.default.div(Et(),(function(e){return"".concat(e.marTop||24,"px")})),cr=I.default.button.attrs((function(){return{"data-test":"review-form-submit-button"}}))(xt(),ct.a,Object(ee.a)("#000000",.2),Object(Z.f)(.3)),lr=I.default.button(gt(),ct.a),ur=Object(I.default)(ut.a)(ht(),lt.b),sr=I.default.div(vt(),lt.b),dr=I.default.div(bt(),Object(Z.b)("fromRight")),fr=I.default.div.attrs((function(){return{"data-test":"review-success-message"}}))(mt(),M.b),pr=Object(I.default)(fr)(pt()),mr=I.default.div(ft()),br=Object(I.default)(ut.a)(dt(),(function(e){var n;return!(null===(n=e.theme)||void 0===n?void 0:n.isRtl)&&"top: 1px"})),vr=t(35),hr=t(24),gr=t(27),xr=t(69),Er=function(e){function n(e){var t;return Object(a.a)(this,n),(t=Object(o.a)(this,Object(c.a)(n).call(this,e))).loginRefs=void 0,t.updateLayout=function(e){t.props.moduleActions.updateReviewLayout(e)},t.beforeSubmitValidation=function(){var e=!!t.loginRefs.name&&t.loginRefs.name.validity.valid,n=!!t.loginRefs.email&&t.loginRefs.email.validity.valid;t.setState({validationStatusBeforeSubmit:{isNameValid:e,isEmailValid:n}})},t.checkInputValidation=function(e){return!!e&&(t.setState({validationStatusBeforeSubmit:Object(h.a)({},t.state.validationStatusBeforeSubmit,Object(v.a)({},e.target.name,e.target.validity.valid||!1))}),e.target.validity.valid||!1)},t.onChange=function(e){t.setState(Object(v.a)({},e.target.name,e.target.value)),["name","email"].includes(e.target.name)&&t.props.userActions.updateUser(Object(v.a)({},e.target.name,e.target.value))},t.onBlur=function(e){var n;return t.setState((n={},Object(v.a)(n,e.target.name,e.target.value),Object(v.a)(n,"touchedStatus",Object(v.a)({},e.target.name,!0)),n)),t.state.showLoginForm&&t.checkInputValidation(e)},t.getRefs=function(e){e&&(t.loginRefs[e.name]=e)},t.validateComment=function(){var e=t.props,n=e.email,r=e.name,a=t.state,i=a.commentText,o=a.showLoginForm,c=a.validationStatusBeforeSubmit,l=a.requestSending,u=c.isEmailValid&&c.isNameValid;return i.trim()?n&&r?!(o&&!u||l):(t.setState({showLoginForm:!0}),!1):(t.setState({isValidComment:!1}),setTimeout((function(){t.setState({isValidComment:!0},(function(){t.loginRefs.commentText.focus()}))}),500),!1)},t.goToRegisterReviewer=function(){var e;return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:(null===(e=t.loginRefs.email)||void 0===e?void 0:e.validity.valid)&&t.updateLayout(g.g.REGISTER_NEW_REVIEWER);case 2:case"end":return n.stop()}}))},t.sendLink=function(){var e,n,r,a;return b.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return e=t.props,n=e.name,r=e.email,a=e.layout,i.next=3,b.a.awrap(T.a.emit(T.b.GET_LOGIN_LINK,{email:null===r||void 0===r?void 0:r.toLowerCase(),name:n}));case 3:i.sent[0]===g.r&&(t.setState({loginLinkSent:!0}),a!==g.g.ADD_COMMENT&&t.updateLayout(g.g.VERIFICATION_EMAIL_SENT));case 5:case"end":return i.stop()}}))},t.showUpdateEmail=function(e){var n,r,a,i,o;return b.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:e.preventDefault(),n=t.props,r=n.email,a=void 0===r?"":r,i=n.name,o=void 0===i?"":i,t.setState({previousEmail:a,previousName:o}),t.updateLayout(g.g.REGISTER_NEW_REVIEWER);case 4:case"end":return c.stop()}}))},t.updateEmail=function(){var e,n,r,a;return b.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return e=t.props,n=e.name,r=e.email,a=t.state.previousEmail,i.next=4,b.a.awrap(T.a.emit(T.b.UPDATE_EMAIL_FOR_LOGIN_LINK,{email:{newEmail:null===r||void 0===r?void 0:r.toLowerCase(),previous:a},name:n}));case 4:i.sent[0]===g.r&&t.updateLayout(g.g.VERIFICATION_EMAIL_SENT);case 6:case"end":return i.stop()}}))},t.registerReviewer=function(e){var n,r,a,i,o,c,l,u,s=arguments;return b.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(i=s.length>1&&void 0!==s[1]&&s[1],o=t.state,c=o.loginLinkSent,l=o.previousEmail,u=(null===(n=t.loginRefs.name)||void 0===n?void 0:null===(r=n.validity)||void 0===r?void 0:r.valid)&&(null===(a=t.loginRefs.email)||void 0===a?void 0:a.validity.valid),l&&t.props.email!==l&&!i&&t.props.commentActions.commentsList([]),c||i||(t.checkInputValidation(e),t.beforeSubmitValidation()),u||i){d.next=7;break}return d.abrupt("return",Promise.resolve());case 7:if(!c||i){d.next=9;break}return d.abrupt("return",t.updateEmail());case 9:return d.abrupt("return",t.sendLink());case 10:case"end":return d.stop()}}))},t.addCommentWithoutAuth=function(){t.updateLayout(g.g.ADD_COMMENT)},t.submitCommentOrReply=function(e,n){var r,a,i,o,c,l,u,s;return b.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(a=t.props,i=a.context,o=a.name,c=t.state,l=c.commentText,u=c.replyText,(s={text:l,createdByName:o}).context=i,t.setState({showSuccessMessage:!1,showErrorMessage:!1}),"reply-text-area"!==e.target.id){d.next=12;break}return s.text=u,d.next=9,b.a.awrap(T.a.emit(T.b.COMMENT_REPLY_SENT,{commentId:n,data:s}));case 9:r=d.sent,d.next=18;break;case 12:if(l){d.next=14;break}return d.abrupt("return");case 14:return t.setState({requestSending:!0}),d.next=17,b.a.awrap(T.a.emit(T.b.COMMENT_SENT,{data:s}));case 17:r=d.sent;case 18:r[0]===g.r&&(t.setState({showSuccessMessage:!0,showErrorMessage:!1,showLoginForm:!1,isValidComment:!0,commentText:"",replyText:"",requestSending:!1}),setTimeout((function(){return t.setState({showSuccessMessage:!1})}),5e3)),r[0]===g.d&&t.setState({showErrorMessage:!0,showSuccessMessage:!1,requestSending:!1});case 20:case"end":return d.stop()}}))},t.getActionHandler=function(e){var n;return(n={},Object(v.a)(n,g.g.LOGIN_WITH_EMAIL,t.goToRegisterReviewer),Object(v.a)(n,g.g.REGISTER_NEW_REVIEWER,t.registerReviewer),Object(v.a)(n,g.g.VERIFICATION_EMAIL_SENT,t.addCommentWithoutAuth),Object(v.a)(n,g.g.ADD_COMMENT,t.submitCommentOrReply),Object(v.a)(n,g.g.ADD_COMMENT_WITH_HISTORY,t.submitCommentOrReply),n)[e]},t.actionButtonHandler=function(e,n){var r,a,i;return b.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e.preventDefault(),r=t.props.layout,a=t.getActionHandler(r),[g.g.ADD_COMMENT,g.g.ADD_COMMENT_WITH_HISTORY,g.g.REGISTER_NEW_REVIEWER,g.g.VERIFICATION_EMAIL_SENT].includes(r)&&(i=g.n[r],r===g.g.ADD_COMMENT_WITH_HISTORY&&"reply-text-area"===e.target.id&&(i=g.n.ADD_REPLY),t.props.amplitudeActions.trackEvent(i,g.l)),o.abrupt("return",a(e,n));case 5:case"end":return o.stop()}}))},t.deleteComment=function(e,n){return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}return t.next=3,b.a.awrap(T.a.emit(T.b.REPLY_DELETED,{commentId:e,replyId:n}));case 3:return t.abrupt("return");case 4:return t.next=6,b.a.awrap(T.a.emit(T.b.COMMENT_DELETED,{commentId:e}));case 6:case"end":return t.stop()}}))},t.ackDeleted=function(e,n){return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}return t.next=3,b.a.awrap(T.a.emit(T.b.ACK_REPLY_DELETED,{commentId:e,replyId:n}));case 3:return t.abrupt("return");case 4:return t.next=6,b.a.awrap(T.a.emit(T.b.ACK_COMMENT_DELETED,{commentId:e}));case 6:case"end":return t.stop()}}))},t.ackResolved=function(e,n){return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b.a.awrap(T.a.emit(T.b.ACK_COMMENT_RESOLVED,{commentId:e}));case 2:case"end":return n.stop()}}))},t.skipToCommentsView=function(e){t.props.isAuthenticatedReviewer&&!(null===e||void 0===e?void 0:e.isAuthenticatedReviewer)&&(T.a.emit(T.b.GET_REVIEWER_INFO_FROM_TOKEN),t.updateLayout(g.g.ADD_COMMENT_WITH_HISTORY))},t.handleKeyDown=function(e){return function(n){var t,r;(null===(t=n.key)||void 0===t?void 0:t.toLowerCase())!==S.q.SPACEBAR.toLowerCase()&&(null===(r=n.key)||void 0===r?void 0:r.toLowerCase())!==S.q.ENTER.toLowerCase()||e(n)}},t.cancelHandler=function(e){var n=t.props,r=n.closePopover,a=n.layout,i=n.email,o=n.name,c=n.isAuthenticatedReviewer,l=t.state,u=l.previousEmail,s=l.previousName;if(e.nativeEvent.stopImmediatePropagation(),[g.g.REGISTER_NEW_REVIEWER,g.g.LOGIN_WITH_EMAIL].includes(a)){if(!u||i!==u||o!==s)return t.props.moduleActions.resetReviewLayout(),t.setState({requestSending:!1,commentText:"",replyText:"",isValidComment:!0,showSuccessMessage:!1,showErrorMessage:!1,showLoginForm:!1,showResendEmailPopup:!1,linkResent:!1,isEmailRegistered:!1,loginLinkSent:!1,previousEmail:"",previousName:"",validationStatusBeforeSubmit:{isNameValid:!0,isEmailValid:!0},touchedStatus:{name:!1,email:!1}}),void r(e);var d=c?g.g.ADD_COMMENT_WITH_HISTORY:g.g.ADD_COMMENT;t.updateLayout(d)}r(e)},t.getValidity=function(){var e=t.props,n=e.name,r=void 0===n?"":n,a=e.email,i=void 0===a?"":a,o=e.layout,c=t.state,l=c.validationStatusBeforeSubmit,u=c.touchedStatus,s=l.isNameValid,d=l.isEmailValid,f=o!==g.g.REGISTER_NEW_REVIEWER||!!(null===r||void 0===r?void 0:r.split(" ").splice(1).join(" "))&&s;return{isFormValid:f,loginFormNameValid:!u.name||f,loginFormEmailValid:!u.email||!!i&&d}},t.formActions=function(e,n){var r=t.props.layout,a=t.state.requestSending,i=t.getValidity().isFormValid;return u.createElement(or,{role:"presentation",verifyPopupShown:[g.g.VERIFICATION_EMAIL_SENT,g.g.ADD_COMMENT].includes(r),marTop:r===g.g.LOGIN_WITH_EMAIL?32:24},u.createElement(cr,{tabIndex:1,disabled:!(!a&&i)&&"disabled",onClick:e,onKeyDown:t.handleKeyDown(e),id:r===g.g.ADD_COMMENT?"comment-text-area":""},r===g.g.ADD_COMMENT&&u.createElement(br,{size:9,name:"arrow-send"}),Object(f.a)(g.s[r])),u.createElement(lr,{tabIndex:1,onClick:n||t.cancelHandler,onKeyDown:t.handleKeyDown(n||t.cancelHandler)},Object(f.a)("[cancel]")))},t.setShowResendEmailPopup=function(e){t.setState({showResendEmailPopup:e})},t.toggleLinkResent=function(e){t.setState({linkResent:e})},t.renderLinkResent=function(){return u.createElement(Gt,{dangerouslySetInnerHTML:{__html:Object(f.a)("[login link resent]",{email:"<span>".concat(t.props.email,"</span>")})}})},t.renderSuccessOrErrorMessage=function(){var e=t.props.name,n=void 0===e?"":e,r=t.state,a=r.showErrorMessage,i=r.showSuccessMessage,o=t.getValidity().isFormValid;return u.createElement(u.Fragment,null,i&&u.createElement(dr,null,u.createElement(fr,null,u.createElement(ur,{theme:t.props.theme,size:9,name:"check-mark-2"}),Object(f.a)("[author notified of comment]")),u.createElement(mr,null)),a&&u.createElement(dr,null,u.createElement(pr,null,u.createElement(sr,null,"!"),Object(f.a)("[error comment sending]")),u.createElement(mr,null)),n&&!o&&u.createElement(dr,null,u.createElement(pr,null,u.createElement(sr,null,"!"),Object(f.a)("[validation enter full name]"))))},t.state={requestSending:!1,commentText:"",replyText:"",isValidComment:!0,showSuccessMessage:!1,showErrorMessage:!1,showLoginForm:!1,showResendEmailPopup:!1,linkResent:!1,isEmailRegistered:!1,loginLinkSent:!1,previousEmail:"",previousName:"",validationStatusBeforeSubmit:{isNameValid:!0,isEmailValid:!0},touchedStatus:{name:!1,email:!1}},t.loginRefs={name:"",email:""},t}return Object(l.a)(n,e),Object(i.a)(n,[{key:"componentDidMount",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:this.skipToCommentsView();case 1:case"end":return e.stop()}}),null,this)}},{key:"componentDidUpdate",value:function(e,n){var t=this,r=this.props,a=r.email,i=void 0===a?"":a,o=r.name,c=void 0===o?"":o,l=r.isExpanded,u=document.activeElement;e.isExpanded!==l&&!1===l&&this.setShowResendEmailPopup(!1),u&&"commentText"!==u.getAttribute("name")&&"replyText"!==u.getAttribute("name")&&this.loginRefs.commentText&&setTimeout((function(){t.state.isValidComment&&t.loginRefs.commentText.focus()}),0),e.name&&!c&&e.email&&!i&&this.setState({requestSending:!1,commentText:"",replyText:"",isValidComment:!0,showSuccessMessage:!1,showErrorMessage:!1,showLoginForm:!1,showResendEmailPopup:!1,linkResent:!1,isEmailRegistered:!1,loginLinkSent:!1,previousEmail:"",previousName:"",validationStatusBeforeSubmit:{isNameValid:!0,isEmailValid:!0},touchedStatus:{name:!1,email:!1}}),this.skipToCommentsView(e)}},{key:"render",value:function(){var e=this,n=this.props,t=n.closePopover,r=n.context,a=n.name,i=void 0===a?"":a,o=n.email,c=void 0===o?"":o,l=n.avatarUrl,s=n.layout,d=n.isRegisteredReviewer,p=this.state,m=p.replyText,b=p.commentText,v=p.isValidComment,h=p.showResendEmailPopup,x=p.linkResent,E=this.getValidity(),O=E.loginFormNameValid,j=E.loginFormEmailValid,y=function(n,t){n.nativeEvent.stopImmediatePropagation(),e.toggleLinkResent(!1),e.setShowResendEmailPopup(t)},w=function(n){n.preventDefault(),n.nativeEvent.stopImmediatePropagation(),y(n,!1),e.showUpdateEmail(n)},C=function(n){n.nativeEvent.stopImmediatePropagation(),e.toggleLinkResent(!0),e.registerReviewer(n,!0)},T=function(){return h&&u.createElement(Qt,{id:"resend-email-popup",sticky:[g.g.ADD_COMMENT,g.g.ADD_COMMENT_WITH_HISTORY].includes(s)},u.createElement(nr,null),u.createElement($t,null,u.createElement(ar,null,u.createElement(Jt,null,x?u.createElement(Zt,null,e.renderLinkResent(),u.createElement(er,{onClick:function(e){return y(e,!1)}},Object(f.a)("[close]"))):u.createElement(u.Fragment,null,u.createElement(tr,null,Object(f.a)("[didnt receive login link]")),u.createElement(rr,null,u.createElement(sn,{name:"mail",size:8}),u.createElement("span",{onClick:C},Object(f.a)("[resend login link]"))),u.createElement(rr,null,u.createElement(sn,{name:"edit",size:10}),u.createElement("span",{onClick:w},Object(f.a)("[change email and name]"))))))))};return u.createElement(Wt,{width:s===g.g.VERIFICATION_EMAIL_SENT?352:444},[g.g.ADD_COMMENT,g.g.VERIFICATION_EMAIL_SENT].includes(s)?u.createElement(Ft,null,function(e){return s===g.g.ADD_COMMENT&&u.createElement(Ut,null,u.createElement(ln,{size:8,name:"mail"}),u.createElement(Yt,null,u.createElement(Kt,{dangerouslySetInnerHTML:{__html:Object(f.a)("[use the login link from email]",{email:"<span>".concat(e,"</span>")})}}),u.createElement(Xt,null,u.createElement(cn,{size:12,name:"help",onClick:function(e){return y(e,!h)}}),T())))}(c),function(e){return s===g.g.VERIFICATION_EMAIL_SENT&&u.createElement(an,null,u.createElement(qt,{dangerouslySetInnerHTML:{__html:Object(f.a)("[login link sent to email]",{email:"<span>".concat(e,"</span>")})}}),u.createElement(Xt,null,u.createElement(cn,{size:12,name:"help",onClick:function(e){return y(e,!h)}}),T()))}(c)):null,u.createElement(ir,{verifyPopupShown:[g.g.VERIFICATION_EMAIL_SENT,g.g.ADD_COMMENT].includes(s)},[g.g.LOGIN_WITH_EMAIL,g.g.REGISTER_NEW_REVIEWER].includes(s)?u.createElement(u.Fragment,null,u.createElement(K,{showName:s===g.g.REGISTER_NEW_REVIEWER,getRefs:this.getRefs,isNameValid:O,isEmailValid:j,isNameDisabled:!!d,onChange:this.onChange,onBlur:this.onBlur,name:i,email:c})):u.createElement(ot,{name:i,email:c,avatarUrl:l,getRefs:this.getRefs,commentText:b,replyText:m,isValidComment:v,onChange:this.onChange,onSubmit:this.actionButtonHandler,onDelete:this.deleteComment,onAcknowledgeDeleted:this.ackDeleted,onAcknowledgeResolved:this.ackResolved,closePopover:t,context:r,layout:s,getFormActions:this.formActions}),[g.g.LOGIN_WITH_EMAIL,g.g.REGISTER_NEW_REVIEWER].includes(s)&&e.formActions(e.actionButtonHandler),this.renderSuccessOrErrorMessage()))}}]),n}(u.Component);var Or=Object($.b)((function(e){return{layout:Object(xr.a)(e),name:Object(gr.g)(e),email:Object(gr.e)(e),avatarUrl:Object(gr.d)(e),isAuthenticatedReviewer:Object(gr.l)(e),isRegisteredReviewer:Object(gr.p)(e),courseId:Object(hr.g)(e),isExpanded:Object(xr.g)(e)}}),(function(e){return{userActions:Object(vr.b)(y,e),moduleActions:Object(vr.b)(w,e),commentActions:Object(vr.b)(C,e),amplitudeActions:Object(vr.b)(r,e)}}))(Er),jr=t(19);function yr(){var e=Object(R.a)(["\n        display: none;\n      "]);return yr=function(){return e},e}function wr(){var e=Object(R.a)(["\n      ",";\n    "]);return wr=function(){return e},e}function Cr(){var e=Object(R.a)(["\n    right: -22px;\n  "]);return Cr=function(){return e},e}function Tr(){var e=Object(R.a)(["\n  background: ",";\n  position: absolute;\n  top: 0;\n  right: -55px;\n  z-index: 10;\n  display: flex;\n  ","\n  border-radius: 30px;\n\n  & .active {\n    display: block !important;\n  }\n\n  ","\n"]);return Tr=function(){return e},e}function kr(){var e=Object(R.a)(["\n      background: #4caf50;\n      color: #fff;\n\n      &:hover,\n      &:focus {\n        color: #fff;\n        outline: none;\n      }\n    "]);return kr=function(){return e},e}function Sr(){var e=Object(R.a)(["\n  ",";\n  cursor: pointer;\n  font-size: 12px;\n  font-weight: 600;\n  margin: 10px;\n  overflow: hidden;\n  width: 34px;\n  height: 34px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #73899e;\n  background: #fff;\n  margin: 6px;\n  padding: 10px;\n  border-radius: 50%;\n  box-shadow: 0 2px 10px 0 ",";\n\n  &:hover,\n  &:focus {\n    color: #4caf50;\n    outline: none;\n  }\n  ","\n"]);return Sr=function(){return e},e}function Rr(){var e=Object(R.a)(["\n  display: inline-block;\n  opacity: 0;\n  ",";\n"]);return Rr=function(){return e},e}function Ir(){var e=Object(R.a)(["\n  color: inherit;\n  margin: 0;\n\n  &.icon {\n    line-height: 13px;\n  }\n"]);return Ir=function(){return e},e}var Mr=Object(I.default)(ut.a)(Ir()),_r=(I.default.span(Rr(),Object(Z.f)("all","0.3s")),I.default.div.attrs((function(){return{"data-test":"review-spot-button"}}))(Sr(),M.b,Object(ee.a)("#000000",.1),(function(e){return e.isActive&&Object(I.css)(kr())}))),Dr=I.default.div(Tr(),Object(ee.a)("#191919",.02),jr.a.large(Cr()),(function(e){return e.isVoiceOver&&Object(I.css)(wr(),jr.a.small(yr()))})),Nr=function(e){function n(e){var t;return Object(a.a)(this,n),(t=Object(o.a)(this,Object(c.a)(n).call(this,e))).toggle=function(e){e.preventDefault(),t.setState({isExpanded:!t.state.isExpanded},(function(){t.props.moduleActions.isTooltipExpanded(t.state.isExpanded)}))},t.closePopup=function(){t.setState({isExpanded:!1},(function(){t.props.moduleActions.isTooltipExpanded(t.state.isExpanded)}))},t.state={isExpanded:!1},t}return Object(l.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){var e=this,n=this.state.isExpanded,t=this.props,r=t.theme,a=t.context,i=t.hintName,o=t.isVoiceOver,c=t.numberOfComments;return u.createElement(Dr,{isVoiceOver:o,isActive:n},u.createElement(p.a,{position:"auto",hintElements:Object(f.a)("[click to leave a comment]"),hintName:i,isExpanded:!!i,isRtl:null===r||void 0===r?void 0:r.isRtl},u.createElement(d.v,{trigger:"manual",open:n,onRequestClose:function(){return e.closePopup()},arrow:!0,position:"right",interactive:!0,tooltipTheme:"light",html:u.createElement(I.ThemeProvider,{theme:r},u.createElement(Or,{role:"dialog",ariaModal:!0,tabIndex:-1,context:a,closePopover:this.toggle}))},u.createElement(_r,{role:"button",tabIndex:1,onClick:this.toggle,onKeyDown:function(n){" "!==n.key&&"Enter"!==n.key||e.toggle(n)},isActive:n||!!c},c||u.createElement(Mr,{size:10,name:"comment"})))))}}]),n}(u.Component);Nr.defaultProps={isVoiceOver:!1};var Ar=Object(I.withTheme)(Object($.b)((function(e,n){return{numberOfComments:Q(e,n.context).filter((function(e){return!(null===e||void 0===e?void 0:e.isDeleted)&&!(null===e||void 0===e?void 0:e.isResolved)})).length}}),(function(e){return{moduleActions:Object(vr.b)(w,e)}}))(Nr));t.d(n,"default",(function(){return Ar}))}}]);